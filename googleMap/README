___________________________________
Concept
-----------------------------------

Data:
The idea of this module is that you attach zero or more (has_many) datapoints to any page.

Presentation:
you can select any number of pages and pass them to the DataObjectDecorator as a DataObjectSet.
From there, the module works out what points it should use.

Interaction:
If the user can edit the current page, then it can also edit the locations (points) associated with current page.
Add/Edit/Delete can be done on the map itself.

___________________________________
How to install and use this module
-----------------------------------

1. review _config.php settings
2. add extension: DataObject::add_extension('SiteTree', 'GoogleMapLocationsDOD'));
3. run db/build/?flush=1
you can add maps as follows by adding the following to your init() function in a page controller:
$this->addMap("showPagePointsMapXML"); //SEE GoogleMapLocationsDOD for the type of maps you can add

for each page type you must / can:
- static $defaults = array ("HasGeoInfo" => 1); - allow points to be added in the CMS
- add a map and static map icon (to be implemented)
 *

you can filter the map data for particular pagetypes
 * see GoogleMapDecorator for more information

___________________________________
To Do PHP
-----------------------------------

- lines
- polygons
- integrate with GIS model
- NO STATIC option
- NO dynamic option
- static maps not working
- implement:


class GoogleMaps extends RequestHandlingData {
	function __construct($parent, $name) {
		$this->parent = $parent;
		$this->name = $name;
	}

	function Link() {
		return Controller::join_links($this->parent->Link(), $this->name);
	}

	function aroundMe($request) {
		$x = $request->getVar('x');
		$y = $request->getVar('y');

		return json_encode(....);
	}

}


class Page_Controller ... {
	function GoogleMaps() {
		return new GoogleMaps($this, 'GoogleMaps');
	}
}


___________________________________
To Do JS
-----------------------------------
many thanks to : http://econym.googlepages.com/index.htm
created by www.sunnysideup.co.nz
to do:
	-. map.setZoom(marker.accuracy*2 + 3);
	-. replace add marker title from longitue, lattitude to address
	-. replace javascript(void) with a warning message that the command did not work.
	-. allow an icon to be anchored anywhere (right now it is at the center bottom)
	-. zoom to in xml does not work....
	-. make all human added markers dragable
	-. implement this:
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://earth.google.com/kml/2.2">
<Document>
			<Style id="randomColorIcon">
						<IconStyle>
									<Icon>
												<href>http://maps.google.com/mapfiles/kml/pal3/icon21.png</href>
									</Icon>
						</IconStyle>
			</Style>
			<Placemark>
						<name>IconStyle.kml</name>
						<styleUrl>#randomColorIcon</styleUrl>
						<Point>
									<coordinates>-122.36868,37.831145,0</coordinates>
						</Point>
			</Placemark>
</Document>
</kml>
1. if points has styleUrl
	2. find id for styleUrl
		3. get location from styleUrl
			4. replace icon URL with styleUrl
